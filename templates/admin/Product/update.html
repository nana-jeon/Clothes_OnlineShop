{% extends 'admin/layout.html' %}

{% block content %}
<div class="container">
  <h1>Update Product</h1>
  <form action="{{ url_for('product_updated') }}" method="POST" enctype="multipart/form-data">


    <!-- Hidden product ID -->
    <input type="hidden" name="product_id" value="{{ product.id }}">


    <!-- Product Name -->
    <label for="name">Product Name</label>
    <input type="text" id="name" name="name" placeholder="Enter product name" value="{{ product.name }}" required>

    <!-- Category -->
    <label for="category">Category</label>
    <select id="category" name="category" required>
      <option value="">Select a category</option>
      {% for category in categories %}
        <option value="{{ category.id }}" {% if category.id == product.category_id %}selected{% endif %}>
          {{ category.name }}
        </option>
      {% endfor %}
    </select>

    <!-- Cost -->
    <label for="cost">Cost ($)</label>
    <input type="number" id="cost" name="cost" step="0.01" min="0" value="{{ product.cost }}" required>

    <!-- Price -->
    <label for="price">Price ($)</label>
    <input type="number" id="price" name="price" step="0.01" min="0" value="{{ product.price }}" required>

{#    <!-- Image -->#}
{#    <label for="image">Product Image</label>#}
{#     <input type="file" name="image">#}
{#    {% if product.image %}#}
{#      <p>Current image:</p>#}
{#      <img src="{{ url_for('static', filename='images/product/' ~ product.image) }}"#}
{#           alt="Product Image" style="max-width: 150px; margin-bottom: 10px;">#}
{#    {% endif %}#}

          <!-- Product Image -->
        <label for="image">Product Image</label>
        <input type="file" name="image">

        <p style="margin-top:8px;">Current image:</p>
        <img
          src="{% if product.image %}
                 {{ url_for('static', filename='images/product/' ~ product.image) }}
               {% else %}
                 {{ url_for('static', filename='images/no-image.png') }}
               {% endif %}"
          alt="Product Image"
          style="max-width:150px; height:auto; border-radius:6px; border:1px solid #ddd;"
          onerror="this.onerror=null;this.src='{{ url_for('static', filename='images/no-image.png') }}';"
        />


    <!-- Stock -->
    <label for="stock">Stock</label>
    <input type="number" id="stock" name="stock" min="0" value="{{ product.stock }}" required>

    <!-- Description -->
    <label for="description">Description</label>
    <textarea id="description" name="description" rows="4" placeholder="Enter product description" required>{{ product.description }}</textarea>

    <!-- Buttons -->
    <div class="form-buttons">
      <div>
        <button type="submit" class="product-btn">Update</button>
        <a href="/admin/product" class="product-btn cancel">Cancel</a>
      </div>
      <button type="reset" class="product-btn reset-btn">Reset</button>
    </div>

  </form>
</div>
{% endblock %}
