{% extends 'master.html' %}

{% block content %}

<!-- Hero Section -->
<header>
    <div class="container">
        <nav>
            <a class="logo">Romdoul Shop</a>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/product">Products</a></li>
                <li><a href="/about_us">About Us</a></li>
                <li><a href="/contact_us">Contact Us</a></li>
            </ul>
            <div class="mobile-menu">
                <i class="fas fa-bars"></i>
            </div>
        </nav>
    </div>
</header>

<main class="container">

    <!-- Hero Slider -->
    <section class="hero-slider">
        <div class="slider-container">
            <div class="slider">

                <div class="slide active">
                    <img src="/static/images/cover 2.jpg">
                    <div class="slide-content">
                        <h2>Summer Sale!</h2>
                        <p>Up to 50% off on selected items</p>
                        <a href="/product" class="btn">Shop Now</a>
                    </div>
                </div>

                <div class="slide">
                    <img src="/static/images/cover.jpg">
                    <div class="slide-content">
                        <h2>New Arrivals</h2>
                        <p>Discover our latest products</p>
                        <a href="/product" class="btn">Explore</a>
                    </div>
                </div>

                <div class="slide">
                    <img src="/static/images/cover1.jpg">
                    <div class="slide-content">
                        <h2>Free Shipping</h2>
                        <p>On all orders over $50</p>
                        <a href="/product" class="btn">Learn More</a>
                    </div>
                </div>

            </div>

            <button class="slider-btn prev-btn">&lt;</button>
            <button class="slider-btn next-btn">&gt;</button>

            <div class="slider-indicators">
                <span class="indicator active"></span>
                <span class="indicator"></span>
                <span class="indicator"></span>
            </div>
        </div>
    </section>

    <!-- Products -->
    <section class="products">
        <h3 class="section-title">Featured Products</h3>

        <div class="product-grid">
            {% for item in products %}
            <div class="product-card">

                <div class="discount" data-category="{{ item.category_id }}">
                    Category {{ item.category_id }}
                </div>

                {% if item.image %}
                <img src="/static/images/product/{{ item.image }}"
                     alt="{{ item.name }}"
                     style="height: 200px; object-fit: contain;">
                {% endif %}

                <a href="/product_detail/{{ item.id }}" class="product-title">
                    {{ item.name }}
                </a>

                <p>${{ "%.2f"|format(item.price|float) }}</p>

                <input
                    type="button"
                    value="Add to Cart"
                    class="btn-add-to-cart"
                    id="add-to-cart-{{ item.id }}"
                    data-id="{{ item.id }}"
                    data-title="{{ item.name }}"
                    data-price="{{ item.price }}"
                    data-image="{{ item.image }}"
                >
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- About -->
    <section class="about-section">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <h2>About Romdoul Shop</h2>
                    <p>
                        We are committed to providing high-quality products with exceptional customer service.
                        Our mission is to make shopping easy, enjoyable, and affordable for everyone.
                    </p>
                    <a href="/about_us" class="btn">Learn More</a>
                </div>
                <div class="about-image">
                    <img src="https://via.placeholder.com/500x300">
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials">
        <div class="container">
            <h2>What Our Customers Say</h2>

            <div class="testimonial-grid">
                <div class="testimonial-card">
                    <p>"Great products and fast shipping! Will definitely shop here again."</p>
                    <strong>- Jane D.</strong>
                </div>

                <div class="testimonial-card">
                    <p>"Excellent customer service. The team went above and beyond to help me."</p>
                    <strong>- Michael S.</strong>
                </div>
            </div>
        </div>
    </section>

</main>

{% endblock %}

{% block custom_script %}
<script>
document.addEventListener('DOMContentLoaded', function () {

    let carts = JSON.parse(localStorage.getItem('carts')) || [];

    document.querySelectorAll('.btn-add-to-cart').forEach(button => {
        button.addEventListener('click', function () {

            const product = {
                id: this.dataset.id,
                title: this.dataset.title,
                price: this.dataset.price,
                image: this.dataset.image,
                quantity: 1
            };

            const index = carts.findIndex(item => item.id === product.id);

            if (index >= 0) {
                carts[index].quantity += 1;
            } else {
                carts.push(product);
            }

            localStorage.setItem('carts', JSON.stringify(carts));
        });
    });

});
</script>
{% endblock %}
